<?xml version="1.0" encoding="utf-8"?>
<FDL version="2.1">
  <Form id="pos2011ly" width="200" height="200" titletext="New Form" borderRadius="10px" onload="pos2011ly_onload" border="1px solid black">
    <Layouts>
      <Layout height="200" mobileorientation="landscape" width="200">
        <Static id="staTableName" taborder="0" text="테이블 번호" left="8" top="6" width="113" height="24" font="16px/normal &quot;Segoe UI&quot;,&quot;Malgun Gothic&quot;,&quot;맑은 고딕&quot;"/>
        <Static id="Static01" taborder="1" text="메뉴이름" left="10" top="36" width="116" height="24"/>
        <Static id="Static03" taborder="2" text="수량" left="74" top="36" width="116" height="24" cssclass="sta_defaultRight"/>
        <Static id="Static03_00" taborder="3" text="총 합산 가격" left="74" top="166" width="116" height="24" cssclass="sta_defaultRight"/>
        <Button id="btnTransparency" taborder="4" left="5" top="5" width="190" height="190" border="0px none" borderRadius="10px" background="transparent" onclick="btnTransparency_onclick" text=""/>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_table">
        <ColumnInfo>
          <Column id="TABLE_ID" type="STRING" size="256"/>
          <Column id="POS_LEFT" type="INT" size="256"/>
          <Column id="POS_TOP" type="INT" size="256"/>
          <Column id="TABLE_NAME" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Script type="xscript5.1"><![CDATA[this.fvApp=nexacro.getApplication();
this.pos2011ly_onload = function(obj:nexacro.Form,e:nexacro.LoadEventInfo)
{
    var objParent = this.parent; 
    var sMyTableId = objParent.u_tableId; 
    
    // 테이블 번호 표시
    this.staTableName.text=sMyTableId + "번 테이블";
    
//     // 데이터 있으면 업데이트 하기
//     this.fn_updateDisplay(sMyTableId);
};

// -------------------- 주문내역, 가격 ------------------------
// this.fn_updateDisplay = function(sId)
// {
//     // 메인 폼의 데이터셋(ds_table)에서 내 번호에 맞는 행을 찾습니다.
//     var nRow = this.parent.parent.ds_table.findRow("TABLE_ID", sId);
//     if(nRow > -1) {
//         var sMenu = this.parent.parent.ds_table.getColumn(nRow, "MENU_NAME");
//         var nPrice = this.parent.parent.ds_table.getColumn(nRow, "TOTAL_PRICE");
//         
//         this.staMenu.set_text(sMenu || "주문 없음");
//         this.staPrice.set_text(nPrice ? nPrice.toLocaleString() : "0");
//     }
// };



this.btnTransparency_onclick = function(obj:nexacro.Button,e:nexacro.ClickEventInfo)
{
	// 나를 생성한 부모 Div에 저장된 ID 가져오기
    var sTableId = this.parent.u_tableId; 

    // 메인 폼의 함수 호출
    // 버튼(this) -> 카드폼(this) -> 동적Div(parent) -> 메인폼(parent)
    var objMainForm = this.parent.parent;

    objMainForm.fn_goOrderForm(sTableId);
};

]]></Script>
  </Form>
</FDL>
